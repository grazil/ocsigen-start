<html><head><title>Module Os_user </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Os_user ocsigen-start"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="../.././../../" class="ocsimore_phrasing_link"><img src="../.././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Start</p><div class="mainmenu"><p class="mainmenu-home"><a href="../.././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href="../.././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href="../.././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href="../.././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p><a href="../.././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href="../.././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p class="mainmenu-current"><a href="../.././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="https://ocsigen.org/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="../.././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="../.././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href="../.././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href="../.././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href="../.././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href="../.././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href="../.././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href="../.././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href="../.././../../projects.html" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="../.././../../papers.html" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="../.././../../credits.html" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="../.././../../contributing.html" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href="../.././../../blog.html" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="../.././../../install.html" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Ocsigen start</h1><h2><a href="../.././manual/intro.html" class="ocsimore_phrasing_link">Introduction</a></h2><h1>Server API</h1><h2><a href="../.././api/server/Os_current_user.html" class="ocsimore_phrasing_link">Os_current_user</a></h2><h2><a href="../.././api/server/Os_date.html" class="ocsimore_phrasing_link">Os_date</a></h2><h2><a href="../.././api/server/Os_db.html" class="ocsimore_phrasing_link">Os_db</a></h2><h2><a href="../.././api/server/Os_email.html" class="ocsimore_phrasing_link">Os_email</a></h2><h2><a href="../.././api/server/Os_fcm_notif.html" class="ocsimore_phrasing_link">Os_fcm_notif</a></h2><h2><a href="../.././api/server/Os_group.html" class="ocsimore_phrasing_link">Os_group</a></h2><h2><a href="../.././api/server/Os_handlers.html" class="ocsimore_phrasing_link">Os_handlers</a></h2><h2><a href="../.././api/server/Os_icons.html" class="ocsimore_phrasing_link">Os_icons</a></h2><h2><a href="../.././api/server/Os_lib.html" class="ocsimore_phrasing_link">Os_lib</a></h2><h2><a href="../.././api/server/Os_msg.html" class="ocsimore_phrasing_link">Os_msg</a></h2><h2><a href="../.././api/server/Os_notif.html" class="ocsimore_phrasing_link">Os_notif</a></h2><h2><a href="../.././api/server/Os_page.html" class="ocsimore_phrasing_link">Os_page</a></h2><h2><a href="../.././api/server/Os_platform.html" class="ocsimore_phrasing_link">Os_platform</a></h2><h2><a href="../.././api/server/Os_request_cache.html" class="ocsimore_phrasing_link">Os_request_cache</a></h2><h2><a href="../.././api/server/Os_services.html" class="ocsimore_phrasing_link">Os_services</a></h2><h2><a href="../.././api/server/Os_session.html" class="ocsimore_phrasing_link">Os_session</a></h2><h2><a href="../.././api/server/Os_tips.html" class="ocsimore_phrasing_link">Os_tips</a></h2><h2><a href="../.././api/server/Os_types.html" class="ocsimore_phrasing_link">Os_types</a></h2><h2><a href="../.././api/server/Os_uploader.html" class="ocsimore_phrasing_link">Os_uploader</a></h2><h2><a href="../.././api/server/Os_user.html" class="ocsimore_phrasing_link">Os_user</a></h2><h2><a href="../.././api/server/Os_user_proxy.html" class="ocsimore_phrasing_link">Os_user_proxy</a></h2><h2><a href="../.././api/server/Os_user_view.html" class="ocsimore_phrasing_link">Os_user_view</a></h2><h2>Index</h2><h3> <span><a href="../.././api/server/index_types.html">Index of types</a></span></h3><h3> <span><a href="../.././api/server/index_exceptions.html">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/server/index_values.html">Index of values</a></span></h3><h3> <span><a href="../.././api/server/index_modules.html">Index of modules</a></span></h3><h3> <span><a href="../.././api/server/index_module_types.html">Index of module types</a></span></h3><h1>Client API</h1><h2><a href="../.././api/client/Os_current_user.html" class="ocsimore_phrasing_link">Os_current_user</a></h2><h2><a href="../.././api/client/Os_date.html" class="ocsimore_phrasing_link">Os_date</a></h2><h2><a href="../.././api/client/Os_handlers.html" class="ocsimore_phrasing_link">Os_handlers</a></h2><h2><a href="../.././api/client/Os_icons.html" class="ocsimore_phrasing_link">Os_icons</a></h2><h2><a href="../.././api/client/Os_lib.html" class="ocsimore_phrasing_link">Os_lib</a></h2><h2><a href="../.././api/client/Os_msg.html" class="ocsimore_phrasing_link">Os_msg</a></h2><h2><a href="../.././api/client/Os_notif.html" class="ocsimore_phrasing_link">Os_notif</a></h2><h2><a href="../.././api/client/Os_page.html" class="ocsimore_phrasing_link">Os_page</a></h2><h2><a href="../.././api/client/Os_platform.html" class="ocsimore_phrasing_link">Os_platform</a></h2><h2><a href="../.././api/client/Os_request_cache.html" class="ocsimore_phrasing_link">Os_request_cache</a></h2><h2><a href="../.././api/client/Os_services.html" class="ocsimore_phrasing_link">Os_services</a></h2><h2><a href="../.././api/client/Os_session.html" class="ocsimore_phrasing_link">Os_session</a></h2><h2><a href="../.././api/client/Os_tips.html" class="ocsimore_phrasing_link">Os_tips</a></h2><h2><a href="../.././api/client/Os_types.html" class="ocsimore_phrasing_link">Os_types</a></h2><h2><a href="../.././api/client/Os_user.html" class="ocsimore_phrasing_link">Os_user</a></h2><h2><a href="../.././api/client/Os_user_proxy.html" class="ocsimore_phrasing_link">Os_user_proxy</a></h2><h2><a href="../.././api/client/Os_user_view.html" class="ocsimore_phrasing_link">Os_user_view</a></h2><h2>Index</h2><h3> <span><a href="../.././api/client/index_types.html">Index of types</a></span></h3><h3> <span><a href="../.././api/client/index_exceptions.html">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/client/index_values.html">Index of values</a></span></h3><h3> <span><a href="../.././api/client/index_modules.html">Index of modules</a></span></h3><h3> <span><a href="../.././api/client/index_module_types.html">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value="../.././../1.0/api/server/Os_user.html">1.0</option><option value="../.././../1.1.0/api/server/Os_user.html">1.1.0</option><option value="../.././../1.5/api/server/Os_user.html">1.5</option><option value="../.././../2.2/api/server/Os_user.html">2.2</option><option value="../.././../4.0.0/api/server/Os_user.html" selected="selected">4.0.0</option><option value="../.././../dev/api/server/Os_user.html">dev</option></select><nav class="how-doctree"><h1>Ocsigen start</h1><h2><a href="../.././manual/intro.html" class="ocsimore_phrasing_link">Introduction</a></h2><h1>Server API</h1><h2><a href="../.././api/server/Os_current_user.html" class="ocsimore_phrasing_link">Os_current_user</a></h2><h2><a href="../.././api/server/Os_date.html" class="ocsimore_phrasing_link">Os_date</a></h2><h2><a href="../.././api/server/Os_db.html" class="ocsimore_phrasing_link">Os_db</a></h2><h2><a href="../.././api/server/Os_email.html" class="ocsimore_phrasing_link">Os_email</a></h2><h2><a href="../.././api/server/Os_fcm_notif.html" class="ocsimore_phrasing_link">Os_fcm_notif</a></h2><h2><a href="../.././api/server/Os_group.html" class="ocsimore_phrasing_link">Os_group</a></h2><h2><a href="../.././api/server/Os_handlers.html" class="ocsimore_phrasing_link">Os_handlers</a></h2><h2><a href="../.././api/server/Os_icons.html" class="ocsimore_phrasing_link">Os_icons</a></h2><h2><a href="../.././api/server/Os_lib.html" class="ocsimore_phrasing_link">Os_lib</a></h2><h2><a href="../.././api/server/Os_msg.html" class="ocsimore_phrasing_link">Os_msg</a></h2><h2><a href="../.././api/server/Os_notif.html" class="ocsimore_phrasing_link">Os_notif</a></h2><h2><a href="../.././api/server/Os_page.html" class="ocsimore_phrasing_link">Os_page</a></h2><h2><a href="../.././api/server/Os_platform.html" class="ocsimore_phrasing_link">Os_platform</a></h2><h2><a href="../.././api/server/Os_request_cache.html" class="ocsimore_phrasing_link">Os_request_cache</a></h2><h2><a href="../.././api/server/Os_services.html" class="ocsimore_phrasing_link">Os_services</a></h2><h2><a href="../.././api/server/Os_session.html" class="ocsimore_phrasing_link">Os_session</a></h2><h2><a href="../.././api/server/Os_tips.html" class="ocsimore_phrasing_link">Os_tips</a></h2><h2><a href="../.././api/server/Os_types.html" class="ocsimore_phrasing_link">Os_types</a></h2><h2><a href="../.././api/server/Os_uploader.html" class="ocsimore_phrasing_link">Os_uploader</a></h2><h2><a href="../.././api/server/Os_user.html" class="ocsimore_phrasing_link">Os_user</a></h2><h2><a href="../.././api/server/Os_user_proxy.html" class="ocsimore_phrasing_link">Os_user_proxy</a></h2><h2><a href="../.././api/server/Os_user_view.html" class="ocsimore_phrasing_link">Os_user_view</a></h2><h2>Index</h2><h3> <span><a href="../.././api/server/index_types.html">Index of types</a></span></h3><h3> <span><a href="../.././api/server/index_exceptions.html">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/server/index_values.html">Index of values</a></span></h3><h3> <span><a href="../.././api/server/index_modules.html">Index of modules</a></span></h3><h3> <span><a href="../.././api/server/index_module_types.html">Index of module types</a></span></h3><h1>Client API</h1><h2><a href="../.././api/client/Os_current_user.html" class="ocsimore_phrasing_link">Os_current_user</a></h2><h2><a href="../.././api/client/Os_date.html" class="ocsimore_phrasing_link">Os_date</a></h2><h2><a href="../.././api/client/Os_handlers.html" class="ocsimore_phrasing_link">Os_handlers</a></h2><h2><a href="../.././api/client/Os_icons.html" class="ocsimore_phrasing_link">Os_icons</a></h2><h2><a href="../.././api/client/Os_lib.html" class="ocsimore_phrasing_link">Os_lib</a></h2><h2><a href="../.././api/client/Os_msg.html" class="ocsimore_phrasing_link">Os_msg</a></h2><h2><a href="../.././api/client/Os_notif.html" class="ocsimore_phrasing_link">Os_notif</a></h2><h2><a href="../.././api/client/Os_page.html" class="ocsimore_phrasing_link">Os_page</a></h2><h2><a href="../.././api/client/Os_platform.html" class="ocsimore_phrasing_link">Os_platform</a></h2><h2><a href="../.././api/client/Os_request_cache.html" class="ocsimore_phrasing_link">Os_request_cache</a></h2><h2><a href="../.././api/client/Os_services.html" class="ocsimore_phrasing_link">Os_services</a></h2><h2><a href="../.././api/client/Os_session.html" class="ocsimore_phrasing_link">Os_session</a></h2><h2><a href="../.././api/client/Os_tips.html" class="ocsimore_phrasing_link">Os_tips</a></h2><h2><a href="../.././api/client/Os_types.html" class="ocsimore_phrasing_link">Os_types</a></h2><h2><a href="../.././api/client/Os_user.html" class="ocsimore_phrasing_link">Os_user</a></h2><h2><a href="../.././api/client/Os_user_proxy.html" class="ocsimore_phrasing_link">Os_user_proxy</a></h2><h2><a href="../.././api/client/Os_user_view.html" class="ocsimore_phrasing_link">Os_user_view</a></h2><h2>Index</h2><h3> <span><a href="../.././api/client/index_types.html">Index of types</a></span></h3><h3> <span><a href="../.././api/client/index_exceptions.html">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/client/index_values.html">Index of values</a></span></h3><h3> <span><a href="../.././api/client/index_modules.html">Index of modules</a></span></h3><h3> <span><a href="../.././api/client/index_module_types.html">Index of module types</a></span></h3></nav></nav><article class="rightcol"><label class="csw-switch"><input type="checkbox" onchange="location = '.././client/Os_user.html';"/><span class="csw-slider csw-slider-style-round"></span><span class="csw-slider-no">Server version</span><span class="csw-slider-yes">Client version</span></label><h1>Module <span><a href="../.././api/server/Os_user.html">Os_user</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Os_user</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href="../.././api/server/Os_user.html">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>This module provides functions and types about users.
</p><hr/><pre class="ocsforge_color odocwiki_code" id="TYPEid"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">id</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span></span></pre><div class="odocwiki_info"><p>Type alias to <span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> to allow to use <span class="odocwiki_inlinecode">Os_user.id</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEt"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">t</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">userid:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_user.html#TYPEid">id</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">fn:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ln:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">avatar:</span> <span class="odocwiki_type">string option</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">language:</span> <span class="odocwiki_type">string option</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><div class="odocwiki_info"><p>Type alias to <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> to allow to use <span class="odocwiki_inlinecode">Os_user.t</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONAlready_exists"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Already_exists</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span></span></pre><div class="odocwiki_info"><p>Exception used if an user already exists. The parameter is the userid of the
existing user.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONNo_such_user"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">No_such_user</span></pre><div class="odocwiki_info"><p>Exception used if an user doesn't exist.</p></div><pre class="ocsforge_color odocwiki_code" id="VALpassword_set"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">password_set</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">password_set userid</span> returns <span class="odocwiki_inlinecode">true</span> if the user with ID <span class="odocwiki_inlinecode">userid</span> has set
a password. Else <span class="odocwiki_inlinecode">false</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwrong_password"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wrong_password</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if a wrong password has been already typed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALaccount_not_activated"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">account_not_activated</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if the account is activated.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuser_already_exists"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">user_already_exists</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if the user already exists.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuser_does_not_exist"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">user_does_not_exist</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if the user exists.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuser_already_preregistered"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">user_already_preregistered</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if the user is already preregistered.</p></div><pre class="ocsforge_color odocwiki_code" id="VALaction_link_key_outdated"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">action_link_key_outdated</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">bool <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Volatile</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><div class="odocwiki_info"><p>Reference used to remember if an action link key is outdated.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuserid_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">userid_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">userid_of_user user</span> returns the userid of the user <span class="odocwiki_inlinecode">user</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfirstname_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">firstname_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">firstname_of_user user</span> returns the first name of the user <span class="odocwiki_inlinecode">user</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALlastname_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">lastname_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">lastname_of_user user</span> returns the last name of the user <span class="odocwiki_inlinecode">user</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALavatar_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">avatar_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string option</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">avatar_of_user user</span> returns the avatar of the user <span class="odocwiki_inlinecode">user</span> as <span class="odocwiki_inlinecode">Some
avatar_uri</span>. It returns <span class="odocwiki_inlinecode">None</span> if the user <span class="odocwiki_inlinecode">user</span> has no avatar.</p></div><pre class="ocsforge_color odocwiki_code" id="VALavatar_uri_of_avatar"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">avatar_uri_of_avatar</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?absolute_path:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Xml</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">uri</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">avatar_uri_of_avatar ?absolute_path avatar</span> returns the URI (absolute or
relative) depending on the value of <span class="odocwiki_inlinecode">absolute_path</span>) of the avatar
<span class="odocwiki_inlinecode">avatar</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALavatar_uri_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">avatar_uri_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?absolute_path:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Xml</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">uri</span> option</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">avatar_uri_of_user user</span> returns the avatar URI (absolute or relative)
depending on the value of <span class="odocwiki_inlinecode">absolute_path</span>) of the avatar of the user <span class="odocwiki_inlinecode">user</span>.
It returns <span class="odocwiki_inlinecode">None</span> is the user <span class="odocwiki_inlinecode">user</span> has no avatar.</p></div><pre class="ocsforge_color odocwiki_code" id="VALlanguage_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">language_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string option</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">language_of_user user</span> returns the language of the user <span class="odocwiki_inlinecode">user</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALfullname_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fullname_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string</span></pre><div class="odocwiki_info"><p>Retrieve the full name of user (which is the concatenation of the first name
and last name).</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_complete"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_complete</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_complete user</span> returns <span class="odocwiki_inlinecode">true</span> if the first name and the last name of
<span class="odocwiki_inlinecode">Os_types.user</span> have been completed yet.</p></div><pre class="ocsforge_color odocwiki_code" id="VALemails_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">emails_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">emails_of_user user</span> returns the emails of the user <span class="odocwiki_inlinecode">user</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALadd_actionlinkkey"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_actionlinkkey</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?autoconnect:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?action:</span>[ `AccountActivation | `Custom of string | `PasswordReset ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?data:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?validity:</span>int64 <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">act_key:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">add_actionlinkkey ?autoconnect ?action ?data ?validity ~act_key ~userid
~email ()</span> adds the action key in the database.</p></div><pre class="ocsforge_color odocwiki_code" id="VALverify_password"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">verify_password</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">password:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">verify_password email password</span> verifies if <span class="odocwiki_inlinecode">email</span> and <span class="odocwiki_inlinecode">password</span>
correspond. It it is the case, it returns the userid of the user with email
<span class="odocwiki_inlinecode">email</span>. Else, it raises the exception <span><a href="../.././api/server/Os_db.html#EXCEPTIONNo_such_resource">Os_db.No_such_resource</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuser_of_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">user_of_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">user_of_userid userid</span> returns the information about the user with ID
<span class="odocwiki_inlinecode">userid</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_actionlinkkey_info"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_actionlinkkey_info</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.Action_link_key.html#TYPEinfo">Os_types.Action_link_key.info</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Retrieve the data corresponding to an action link key, each
call decrements the validity of the key by <span class="odocwiki_inlinecode">1</span> if it exists and
<span class="odocwiki_inlinecode">validity &gt; 0</span> (it remains at <span class="odocwiki_inlinecode">0</span> if it's already <span class="odocwiki_inlinecode">0</span>). It is up to
you to adapt the actions according to the value of validity!
Raises <span><a href="../.././api/server/Os_db.html#EXCEPTIONNo_such_resource">Os_db.No_such_resource</a></span> if the action link key is not found.</p></div><pre class="ocsforge_color odocwiki_code" id="VALuserid_of_email"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">userid_of_email</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">userid_of_email email</span> returns the userid of the user with email <span class="odocwiki_inlinecode">email</span>.
It raises the exception <span><a href="../.././api/server/Os_db.html#EXCEPTIONNo_such_resource">Os_db.No_such_resource</a></span> if the email <span class="odocwiki_inlinecode">email</span> is
not used.</p></div><pre class="ocsforge_color odocwiki_code" id="VALemails_of_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">emails_of_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">emails_of_userid userid</span> returns the emails list of user with ID
<span class="odocwiki_inlinecode">userid</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALemail_of_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">email_of_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">email_of_userid userid</span> returns the main email of user with ID
<span class="odocwiki_inlinecode">userid</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALemails_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">emails_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">emails_of_user user</span> returns the emails list of user <span class="odocwiki_inlinecode">user</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALemail_of_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">email_of_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">email_of_user user</span> returns the main email of user <span class="odocwiki_inlinecode">user</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_language"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_language</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">get_language userid</span> returns the language of the user with ID <span class="odocwiki_inlinecode">userid</span>. The
language is retrieved from the database.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_users"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_users</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?pattern:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">get_users ?pattern ()</span> gets users who match the <span class="odocwiki_inlinecode">pattern</span> (useful for
completion).</p></div><pre class="ocsforge_color odocwiki_code" id="VALcreate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">create</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?password:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?avatar:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?language:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">firstname:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">lastname:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">create ?password ?avatar ?language ~firstname ~lastname email</span> creates a new user
with the given information. An email, the first name and the last name are mandatory.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?password:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?avatar:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?language:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">firstname:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">lastname:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">update ?password ?avatar ?language ~firstname ~lastname userid</span> update the
given information of the user with ID <span class="odocwiki_inlinecode">userid</span>. Only given information are
updated.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate'"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update'</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?password:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Another version of <span class="odocwiki_inlinecode">update</span> using a type <span><a href="../.././api/server/Os_types.User.html#TYPEt">Os_types.User.t</a></span> instead of
label.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate_password"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update_password</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">password:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">update_password ~userid ~password</span> updates the password only. <span class="odocwiki_inlinecode">password</span>
must not be hashed: it is done by the function <span class="odocwiki_inlinecode">f_crypt</span> of the tuple
<span><a href="../.././api/server/Os_db.html#VALpwd_crypt_ref">Os_db.pwd_crypt_ref</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate_avatar"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update_avatar</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">avatar:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">update_avatar ~userid ~avatar</span> updates the avatar of the user with ID
<span class="odocwiki_inlinecode">userid</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate_language"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update_language</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">language:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">update_language ~userid ~language</span> updates the language of the user with ID
<span class="odocwiki_inlinecode">userid</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_registered"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_registered</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_registered email</span> returns <span class="odocwiki_inlinecode">true</span> if a user exists with email <span class="odocwiki_inlinecode">email</span>.
Else, it returns <span class="odocwiki_inlinecode">false</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_preregistered"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_preregistered</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_preregistered email</span> returns <span class="odocwiki_inlinecode">true</span> if a user exists with email
<span class="odocwiki_inlinecode">email</span>. Else, it returns <span class="odocwiki_inlinecode">false</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALadd_preregister"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_preregister</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">add_preregister email</span> adds an email into the preregister collections.</p></div><pre class="ocsforge_color odocwiki_code" id="VALremove_preregister"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">remove_preregister</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">remove_preregister email</span> removes an email from the preregister
collections.</p></div><pre class="ocsforge_color odocwiki_code" id="VALall"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">all</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?limit:</span>int64 <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> string list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Get <span class="odocwiki_inlinecode">limit</span> (default: 10) emails from the preregister collections.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_pwd_crypt_fun"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_pwd_crypt_fun</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span>string <span class="ocsforge_color_delimiter">-&gt;</span> string<span class="ocsforge_color_delimiter">)</span> * <span class="ocsforge_color_delimiter">(</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> bool<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  unit</span></pre><div class="odocwiki_info"><p>By default, passwords are encrypted using Bcrypt.
You can customize this by calling this function
with a pair of function (crypt and check password).
The first parameter of the second function is the user id
(in case you need it).
Then it takes as second parameter the password given
by user, and as third parameter the hash found in database.</p></div><pre class="ocsforge_color odocwiki_code" id="VALremove_email_from_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">remove_email_from_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">remove_email_from_user ~userid ~email</span> removes the email <span class="odocwiki_inlinecode">email</span> from the
user with the id <span class="odocwiki_inlinecode">userid</span>. If the email is registered as the main email for
the user it fails with the exception <span><a href="../.././api/server/Os_db.html#EXCEPTIONMain_email_removal_attempt">Os_db.Main_email_removal_attempt</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_email_validated"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_email_validated</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_email_validated ~userid ~email</span> returns whether for a user designated by
its id the given email has been validated.</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_main_email"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_main_email</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_main_email ~userid ~email</span> returns whether an email is the main email
registered for a given user designated by its id.</p></div><pre class="ocsforge_color odocwiki_code" id="VALupdate_main_email"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">update_main_email</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href="../.././api/server/Os_types.User.html#TYPEid">Os_types.User.id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">update_mail_email ~userid ~email</span> sets the main email for a user with the
ID <span class="odocwiki_inlinecode">userid</span> as the email <span class="odocwiki_inlinecode">email</span>.</p></div></article></div></div></body></html>
